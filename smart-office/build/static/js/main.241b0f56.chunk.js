(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n.p+"static/media/logo.90c95fcb.svg"},20:function(e,t,n){e.exports=n(56)},26:function(e,t,n){},46:function(e){e.exports=[{ID:1,type:"category",name:"Cups",image:"images/category_1.png",elements:[{ID:8,type:"category",name:"Paper Cups",parentID:1,image:"images/category_8.png",elements:[{ID:70,type:"item",name:"Paper Cups Small",parentID:8,image:"images/item_1.png",notifications:[{ID:"123ABC",type:"from_management",createdAt:"24-04-2019 19:25:00",content:"We have notified the supplier and are waiting for their response.",itemID:70},{ID:"CBA123",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"3 other notifications have been sent about this item.",itemID:70}]},{ID:71,type:"item",name:"Paper Cups Medium",parentID:8,image:"images/item_2.png",notifications:[{ID:"CBD123",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"4 other notifications have been sent about this item.",itemID:71}]},{ID:72,type:"item",name:"Paper Cups Large",parentID:8,image:"images/item_3.png",notifications:[{ID:"BBB456",type:"from_management",createdAt:"28-04-2019 14:00:00",content:"We have notified the supplier and a new batch is on its way. Thank you for your patience!",itemID:72}]}]},{ID:9,type:"category",name:"Glass Cups",parentID:1,image:"images/category_9.png",elements:[{ID:73,type:"item",name:"Glass Cups Small",parentID:9,image:"images/item_1.png",notifications:[{ID:"123ABD",type:"from_management",createdAt:"24-04-2019 19:25:00",content:"We have notified the supplier and are waiting for their response.",itemID:73},{ID:"DBA123",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"3 other notifications have been sent about this item.",itemID:73}]},{ID:74,type:"item",name:"Glass Cups Medium",parentID:9,image:"images/item_2.png",notifications:[{ID:"DBD123",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"4 other notifications have been sent about this item.",itemID:74}]},{ID:75,type:"item",name:"Glass Cups Large",parentID:9,image:"images/item_3.png"}]},{ID:10,type:"category",name:"Plastic Cups",parentID:1,image:"images/category_10.png"}]},{ID:2,type:"category",name:"Stationary",image:"images/category_2.png"},{ID:3,type:"category",name:"Coffee",image:"images/category_3.png",elements:[{ID:11,type:"category",name:"Paper Coffee",parentID:1,image:"images/category_8.png",elements:[{ID:76,type:"item",name:"Paper Coffee Small",parentID:11,image:"images/item_1.png",notifications:[{ID:"124ABC",type:"from_management",createdAt:"24-04-2019 19:25:00",content:"We have notified the supplier and are waiting for their response.",itemID:76},{ID:"CBA124",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"3 other notifications have been sent about this item.",itemID:76}]},{ID:77,type:"item",name:"Paper Coffee Medium",parentID:11,image:"images/item_2.png",notifications:[{ID:"CBD124",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"4 other notifications have been sent about this item.",itemID:77}]},{ID:78,type:"item",name:"Paper Coffee Large",parentID:11,image:"images/item_3.png"}]},{ID:12,type:"category",name:"Glass Coffee",parentID:3,image:"images/category_9.png",elements:[{ID:79,type:"item",name:"Glass Coffee Small",parentID:12,image:"images/item_1.png",notifications:[{ID:"143ABD",type:"from_management",createdAt:"24-04-2019 19:25:00",content:"We have notified the supplier and are waiting for their response.",itemID:79},{ID:"DBA143",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"3 other notifications have been sent about this item.",itemID:79}]},{ID:80,type:"item",name:"Glass Coffee Medium",parentID:12,image:"images/item_2.png",notifications:[{ID:"DBD143",type:"from_platform",createdAt:"24-04-2019 19:20:00",content:"4 other notifications have been sent about this item.",itemID:80}]},{ID:81,type:"item",name:"Glass Coffee Large",parentID:12,image:"images/item_3.png"}]},{ID:13,type:"category",name:"Plastic Coffee",parentID:1,image:"images/category_10.png"}]},{ID:4,type:"category",name:"Snacks",image:"images/category_4.png"},{ID:5,type:"category",name:"Tea",image:"images/category_5.png"},{ID:6,type:"category",name:"Soft Drinks",image:"images/category_6.png"},{ID:7,type:"category",name:"Sugar & Salt Packs",image:"images/category_7.png"}]},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(18),r=n.n(o),s=(n(26),n(1)),c=n(2),l=n(6),m=n(4),u=n(5),p=n(3),h=n(8),f=n.n(h),d=function(){function e(t){var n=this;Object(s.a)(this,e),null!==t&&(this.chosen=!1,this.ID=t.hasOwnProperty("id")?t.id:null,this.type=t.hasOwnProperty("type")?t.type:null,this.name=t.hasOwnProperty("name")?t.name:null,this.image=t.hasOwnProperty("image")?t.image:null,this.parentID=t.hasOwnProperty("parentId")?t.parentID:null,this.elements=function(){var n=[],a=t.hasOwnProperty("elements")?t.elements:[];if(a&&a.length>0)for(var i=0;i<a.length;i++)n.push(new e(a[i]));return n}(),this.quantity=this.elements.length,this.notifications=function(){var e=[],a=t.hasOwnProperty("messages")?t.messages:[];if(a&&a.length>0)for(var i=0;i<a.length;i++)a[i].elementId=n.ID,e.push(a[i]);return e}())}return Object(c.a)(e,[{key:"quantity",get:function(){return this._quantity},set:function(e){this._quantity=e}},{key:"parentID",get:function(){return this._parentID},set:function(e){this._parentID=e}},{key:"elements",get:function(){return this._elements},set:function(e){this._elements=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"image",get:function(){return this._image},set:function(e){this._image=e}},{key:"ID",get:function(){return this._ID},set:function(e){this._ID=e}},{key:"chosen",get:function(){return this._chosen},set:function(e){this._chosen=e}}]),e}(),g=function e(){Object(s.a)(this,e),this.loadElementsFromLocal=function(){try{var e=n(46);if(e){for(var t=[],a=0;a<e.length;a++)t.push(new d(e[a]));return t}}catch(i){console.error(i)}return[]}};g.HTTP_REQUEST_STATUS_OK=200,g.HTTP_REQUEST_STATUS_CREATED=201,g.HTTP_REQUEST_STATUS_BAD_REQUEST=400,g.HTTP_REQUEST_STATUS_NO_CONTENT=204,g.HTTP_REQUEST_STATUS_NOT_FOUND=404,g.ELEMENT_TYPE_CATEGORY="category",g.ELEMENT_TYPE_ITEM="item",g.STATION_ID="5cec1a164bda4429340dfdbe",g.API_GLOBAL_RETRIEVE=(g.API_ROOT="https://smart-office-backend.herokuapp.com/api/")+"user/stations/",g.API_REQUEST_SEND=g.API_ROOT+"user/requests/add",g.API_NOTIFICATION_SEND=g.API_ROOT+"user/notifications/add",g.loadElementsFromAPI=function(){return new Promise(function(e,t){f.a.get(g.API_GLOBAL_RETRIEVE+g.STATION_ID).then(function(n){try{var a=n.status;parseInt(a)===g.HTTP_REQUEST_STATUS_OK&&(console.log(n),e(n.data))}catch(i){console.error("Parsing error at load."),console.error(i),t()}}).catch(function(e){console.log(e),t()}).finally(function(){})})},g.generateAppContextValues=function(e){return{station:e.state.station,doChangeIsSafeToUpdateUniverse:function(t){e.setState({isSafeToUpdateUniverse:!0===t})},doGetIsSafeToUpdateUniverse:function(){return e.state.isSafeToUpdateUniverse},doUpdateUniverse:e.doUpdateUniverse.bind(e),startLoading:function(){e.setState({loading:!0})},stopLoading:function(){e.setState({loading:!1})},doNotificationSend:e.doNotificationSend.bind(e)}},g.loadNotifications=function(e){for(var t=[],n=0;n<e.length;n++)for(var a=0;a<e[n].notifications.length;a++)e[n].notifications[a].elementId=e[n].ID,t.push(e[n].notifications[a]);return t},g.loadItems=function(e){for(var t=[],n=0;n<e.length;n++)if("category"===e[n].type)for(var a=g.loadItems(e[n].elements),i=0;i<a.length;i++)t.push(a[i]);else t.push(e[n]);return t},g.isEmpty=function(e){try{if(void 0===e||"undefined"===typeof e||null===e)return!0;if("object"===typeof e){for(var t in e)if(void 0!==t)return!1}else{if(e.constructor!==Array)return"0"!==e&&0!==e&&!1!==e&&!0!==e&&(!e||/^\s*$/.test(String(e)));if(0!==e.length)return!1}}catch(n){console.error(n)}return!0},g.flattenElements=function(e){for(var t={},n=0;n<e.length;n++)t[String(e[n].ID)]=e[n],!g.isEmpty(e[n].elements)&&e[n].elements.length>0&&function(){var a=g.flattenElements(e[n].elements);Object.keys(a).forEach(function(e){t[String(e)]=a[e]})}();return t};var v=g,E=(n(47),n(48),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={},n.onItemClick=function(e){n.props.click(n.props.item.ID)},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=["Item",this.props.item.type===v.ELEMENT_TYPE_ITEM?"final":"",this.props.item.chosen?"chosen":""],t=this.props.item.type===v.ELEMENT_TYPE_CATEGORY?"drag_indicator":this.props.item.chosen?"close":"play_arrow";return i.a.createElement("div",{onClick:this.props.sideBarCheck?null:this.onItemClick.bind(this,this.props.item.ID),className:e.join(" ")},i.a.createElement("div",{className:"image"},i.a.createElement("img",{src:this.props.item.image,alt:""})),i.a.createElement("div",{className:"body"},i.a.createElement("p",{className:"name"},this.props.item.name)),i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"quantity"},i.a.createElement("i",{className:"material-icons"},"label"),i.a.createElement("p",null,this.props.item.quantity," items")),i.a.createElement("div",{className:"button"},i.a.createElement("i",{className:"material-icons"},t))))}}]),t}(a.Component)),y=(n(49),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).getParent=function(e,t){var a=null;if(null!==e.parentID)for(var i=0;i<t.length;i++){for(var o=0;o<t[i].elements.length;o++)if(e===t[i].elements[o].ID)return t[i];if("item"!==t[i].type&&null!==(a=n.getParent(e,t[i].elements)))break}return a},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[],n=this.props.chosen,a=[];if(null!==n&&void 0!==n){for(a="item"!==n.type?n.elements:this.getParent(n.ID,this.props.elements).elements;null!==n.parentID&&(t.push(n),null!==(n=this.getParent(n.ID,this.props.elements))););n&&t.push(n)}else null==n&&(a=this.props.elements);return i.a.createElement("div",{className:"MainContainer"},i.a.createElement("div",{className:"breadcrumbs"},i.a.createElement("p",{onClick:function(){e.props.onItemClick(null)}}," ","All items"," "),t.reverse().map(function(t,n){return i.a.createElement("div",{key:n,onClick:function(){e.props.onItemClick(t.ID)}},i.a.createElement("i",{className:"material-icons"},"arrow_right"),i.a.createElement("p",null,t.name))})),i.a.createElement("div",{className:"Main"},v.isEmpty(a)?i.a.createElement("div",{className:"Item empty"},i.a.createElement("p",null,"0"),i.a.createElement("span",null,"Items")):a.map(function(t){return i.a.createElement(E,{click:e.props.onItemClick,key:t.ID,item:t})})))}}]),t}(a.Component)),b=(n(9),i.a.createContext({station:{},doGetIsSafeToUpdateUniverse:function(e){},doChangeIsSafeToUpdateUniverse:function(e){},doUpdateUniverse:function(){},startLoading:function(e){},stopLoading:function(e){},doNotificationSend:function(e){}})),k=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t={building:"Centric Iasi",floor:"Floor "+(v.isEmpty(this.context.station.floor)?"-":this.context.station.floor),table:"Station "+(v.isEmpty(this.context.station.name)?"-":this.context.station.name)};return i.a.createElement("header",null,i.a.createElement("button",{onClick:function(){e.props.onToggleMobileDrawer()},className:"button menu"},i.a.createElement("i",{className:"material-icons"},"close")),i.a.createElement("p",null,t.building," . ",t.floor," ."," ",t.table))}}]),t}(a.Component);k.contextType=b;var I=k,C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={element:n.props.element,actions:["Action1","Action2","Action3"]},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"sideBarCategory"},i.a.createElement(E,{item:this.props.element,sideBarCheck:!0}),i.a.createElement("div",{className:"divider"}),i.a.createElement("h3",null,"How it works"),i.a.createElement("p",{className:"subtitle"},t.getInstructions()),i.a.createElement("div",{className:"spacer"}),i.a.createElement("div",{className:"button grey",onClick:function(){return e.props.onClickDiscardSearch()}},i.a.createElement("i",{className:"material-icons"},"close"),i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Discard Search"))))}}],[{key:"getInstructions",value:function(){return"Click through the categories until you find the item you are looking for, or find it with the search feature on the top of the screen."}}]),t}(a.Component),N=n(11),D=n.n(N),O=function(){function e(t){Object(s.a)(this,e),null!==t&&(this.ID=t.hasOwnProperty("ID")?t.ID:null,this.type=t.hasOwnProperty("type")?t.type:null,this.createdAt=t.hasOwnProperty("createdAt")?t.createdAt:null,this.content=t.hasOwnProperty("content")?t.content:null,this.itemID=t.hasOwnProperty("elementId")?t.elementId:null)}return Object(c.a)(e,[{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"content",get:function(){return this._content},set:function(e){this._content=e}},{key:"ID",get:function(){return this._ID},set:function(e){this._ID=e}},{key:"createdAt",get:function(){return this._createdAt},set:function(e){this._createdAt=e}},{key:"itemID",get:function(){return this._itemID},set:function(e){this._itemID=e}}]),Object(c.a)(e,null,[{key:"parseDate",value:function(e){try{return D()(e,D.a.ISO_8601).format("MMMM Do YYYY, h:mm:ss A")}catch(t){console.error(t)}return"-"}}]),e}(),_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={numberOfShownNotifications:3,notifications:[{itemName:"Paper Cup Medium",timeStamp:"4:20 PM",message:"We have notified the supplier and a new batch is on its way. Thank you for your patience",type:"normal"},{itemName:"Milk 3% fat",timeStamp:"3:45 PM",message:"We have notified the supplier. An update will be made once their answer is received.",type:"important"},{itemName:"Paper Cup Large",timeStamp:"3:30 PM",message:"We have notified the supplier. An update will be made once their answer is received.",type:"important"}]},n.getItemNameById=function(e){return!v.isEmpty(n.props.itemsFlat)&&n.props.itemsFlat.hasOwnProperty(e)?n.props.itemsFlat[e].name:null},n.getNotificationsFromManagement=function(){for(var e=[],t=0;t<n.props.notifications.length;t++)"from_management"===n.props.notifications[t].type&&e.push(n.props.notifications[t]);return e},n.printDate=function(e){return O.parseDate(e.createdAt)},n.getFirstNotifications=function(e,t){var n=[];e>t.length&&(e=t.length),e<0&&(e=2);for(var a=0;a<e;a++)n.push(t[a]);return n},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=0;return i.a.createElement("div",{className:"sideBarInitial"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"material-icons"},"explore")),i.a.createElement("h3",null,"How it works"),i.a.createElement("p",{className:"subtitle"},"If your station is lacking a certain item, find it in the platform and mark it unavailable. Management will try to fix the supply issue as soon as possible."),i.a.createElement("button",{className:"button grey",onClick:function(){return e.props.onClickSearch()}},i.a.createElement("i",{className:"material-icons"},"search"),i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Search and mark unavailable"),i.a.createElement("span",null,"or pick it from a category on the left side"))),i.a.createElement("p",{className:"subtitle"},"If the item was never made available, you can request it to be included in the station stock in the future."),i.a.createElement("button",{className:"button grey",onClick:function(){return e.props.onClickRequest()}},i.a.createElement("i",{className:"material-icons"},"add"),i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Request new item"))),i.a.createElement("div",{className:"divider"}),i.a.createElement("div",{className:"notifications"},i.a.createElement("div",{className:"header"},i.a.createElement("h4",null,"Notifications"),i.a.createElement("button",{onClick:function(){e.props.onClickNotifications()}},"View all")),this.props.notifications.slice(0,3).map(function(n){return i.a.createElement("div",{key:++t,className:"notification-item"},i.a.createElement("div",{className:"header"},i.a.createElement("p",null,e.getItemNameById(n.elementId)),i.a.createElement("p",{className:"time"},e.printDate(n).toString())),i.a.createElement("div",{className:"notification-item-message"},i.a.createElement("h6",null,"from_management"===n.type?"From management: ":null,n.content)))})))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={element:n.props.element},n.getItemNotifications=function(){return 0===n.props.element.notifications.length?i.a.createElement("p",null,"No notifications"):n.props.element.notifications.map(function(e,t){return i.a.createElement("div",{key:t,className:"notification "+e.type},i.a.createElement("p",null,"from_management"===e.type?i.a.createElement("b",null,"Message from management:"):""," ",e.content))})},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"ItemBar sideBarItem"},i.a.createElement("img",{src:this.props.element.image,alt:""}),i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"notifications"}," ",this.getItemNotifications()),i.a.createElement("h2",null,this.props.element.name)),i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"button none",onClick:function(){e.context.doNotificationSend({itemId:e.props.element.ID,quantity:0}),e.props.onActionConfirmation()}},i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"None left at the station"))),i.a.createElement("div",{className:"button few",onClick:function(){return e.props.onClickFew()}},i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"A few left"),i.a.createElement("span",null,"requires quantity input"))),i.a.createElement("div",{className:"button discard",onClick:function(){return e.props.onClickDiscardSearch()}},i.a.createElement("i",{className:"material-icons"},"close"),i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Discard")))))}}]),t}(a.Component);w.contextType=b;var S=w,P=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={element:n.props.element,actions:["Action1","Action2","Action3"]},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getTypeOfSidebar",value:function(){var e=this;return null===this.props.element?i.a.createElement(_,{itemsFlat:this.props.itemsFlat,onClickSearch:this.props.onClickSearch,onClickRequest:this.props.onClickRequest,notifications:this.props.notifications,items:this.props.items,onClickNotifications:this.props.onClickNotifications}):"item"===this.props.element.type?i.a.createElement(S,{itemsFlat:this.props.itemsFlat,element:this.props.element,onClickDiscardSearch:function(){e.props.onClickDiscardSearch(),e.props.onToggleMobileDrawer("close")},onActionConfirmation:this.props.onActionConfirmation,onClickFew:this.props.onClickFew}):i.a.createElement(C,{itemsFlat:this.props.itemsFlat,element:this.props.element,onClickDiscardSearch:function(){e.props.onClickDiscardSearch(),e.props.onToggleMobileDrawer("close")}})}},{key:"render",value:function(){return i.a.createElement("div",{id:"SideBar"},i.a.createElement(I,{onToggleMobileDrawer:this.props.onToggleMobileDrawer}),this.getTypeOfSidebar())}}]),t}(a.Component),T=(n(51),n(19)),A=n.n(T),j=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).onClickGoBack=function(e){n.props.onClickGoBack(n.getParent(n.props.element.ID,n.props.elements))},n.onClickOption=function(e){n.props.onClickOption(e.ID)},n.resetValue=function(){n.setState({inputValue:""})},n.searchInName=function(e){return-1!==(e=e.toLowerCase()).indexOf(n.state.inputValue.toLowerCase())},n.getParent=function(e,t){var a=null;if(null!==e.parentID)for(var i=0;i<t.length;i++){for(var o=0;o<t[i].elements.length;o++)if(e===t[i].elements[o].ID)return t[i];if("item"!==t[i].type&&null!==(a=n.getParent(e,t[i].elements)))break}return a},n.pressed=0,n.setWrapperRef=n.setWrapperRef.bind(Object(p.a)(Object(p.a)(n))),n.handleClickOutside=n.handleClickOutside.bind(Object(p.a)(Object(p.a)(n))),n.state={inputValue:""},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("touchstart",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("touchstart",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.props.discardSearch()}},{key:"updateInputValue",value:function(e){this.setState({inputValue:e.target.value})}},{key:"render",value:function(){var e=this,t={right:"238px"};return i.a.createElement("nav",{className:"NavBar"},i.a.createElement("div",{className:"logo"},i.a.createElement("img",{alt:"Logo",src:A.a})),i.a.createElement("div",{className:"body"},null!==this.props.element?i.a.createElement("button",{className:"button goBack",onClick:function(){e.onClickGoBack(e.getParent(e.props.element.ID,e.props.elements))}},i.a.createElement("i",{className:"material-icons"}," arrow_back")):null,i.a.createElement("button",{className:"button notifications",onClick:function(){return e.props.onToggleNotificationPopup()}},i.a.createElement("i",{className:"material-icons"}," notifications")),i.a.createElement("div",{className:"searchBar"},i.a.createElement("input",{placeholder:"Search for a specific item",onClick:function(){return e.props.onClickNavBar()},value:this.state.inputValue,onChange:function(t){return e.updateInputValue(t)}}),i.a.createElement("i",{className:"material-icons search-icon"},"search"),this.props.navBarClick?i.a.createElement("div",Object.assign({id:"search-list"},this.props.element?t={style:t}:null,{ref:this.setWrapperRef}),this.searchBarItems(this.props.elements,0)):null),i.a.createElement("button",{onClick:function(){e.props.onToggleMobileDrawer()},className:"button menu"},i.a.createElement("i",{className:"material-icons"},"menu"))))}},{key:"searchBarItems",value:function(e,t){var n=this,a=0;return 0===t?e.map(function(e){return n.searchBarItems(e,1)}):e.elements.map(function(e){return"item"===e.type?n.searchInName(e.name)&&a<6?i.a.createElement("div",{key:++a,className:"searchItem",onClick:function(){n.onClickOption(e),n.props.discardSearch()}},i.a.createElement("img",{alt:"Item",src:e.image}),i.a.createElement("p",null," "+e.name),i.a.createElement("div",{className:"btn"},i.a.createElement("i",{className:"material-icons"},"play_arrow"))):null:n.searchBarItems(e,1)})}}]),t}(a.Component),R=(n(52),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).setWrapperRef=n.setWrapperRef.bind(Object(p.a)(Object(p.a)(n))),n.request_name=i.a.createRef(),n.request_description=i.a.createRef(),n.request_badge=i.a.createRef(),n.request_modal=i.a.createRef(),n.handleClickOutside=n.handleClickOutside.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("touchstart",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("touchstart",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&(console.log("You clicked outside of me!"),this.props.togglePopup())}},{key:"doRequest",value:function(){var e=this,t=this,n=this.request_name.current.value,a=this.request_description.current.value,i=this.request_badge.current.value,o=!1;if(v.isEmpty(n)?(this.request_name.current.classList.contains("warn")||this.request_name.current.classList.add("warn"),o=!0):this.request_name.current.classList.contains("warn")&&this.request_name.current.classList.remove("warn"),v.isEmpty(a)?(this.request_description.current.classList.contains("warn")||this.request_description.current.classList.add("warn"),o=!0):this.request_description.current.classList.contains("warn")&&this.request_description.current.classList.remove("warn"),i=v.isEmpty(i)?"-":i,!0!==o)return this.context.startLoading(),this.request_modal.current.classList.contains("loading")||this.request_modal.current.classList.add("loading"),new Promise(function(o,r){f.a.post(v.API_REQUEST_SEND,{stationId:t.context.station.id,name:n,description:a,badge:i}).then(function(n){try{console.log(n);var a=n.status;parseInt(a)===v.HTTP_REQUEST_STATUS_OK||parseInt(a)===v.HTTP_REQUEST_STATUS_CREATED?(console.log("[OK] Product request was successful!"),t.context.stopLoading(),e.request_modal.current.classList.contains("loading")&&e.request_modal.current.classList.remove("loading"),e.props.onSubmit()):console.log("Product request encountered errors.")}catch(i){console.error("Product request failed."),console.error(i),r()}}).catch(function(n){console.error("Product request failed miserably."),console.error(n.response),t.context.stopLoading(),e.request_modal.current.classList.contains("loading")&&e.request_modal.current.classList.remove("loading"),r()})})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"RequestPopup",ref:this.request_modal},i.a.createElement("div",{className:"inner"},i.a.createElement("div",{className:"card",ref:this.setWrapperRef},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"header"},i.a.createElement("h2",null,"Request new item"),i.a.createElement("div",{className:"button return",onClick:function(){return e.props.togglePopup()}},"Return to dashboard")),i.a.createElement("p",null,"Fill in the form with the information about a new product you would like to see at this shared station."),i.a.createElement("p",null,"Management will be notified about your request and it will be taken into account."),i.a.createElement("form",null,i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"request_name"},"1. Name of the item *"),i.a.createElement("input",{id:"request_name",ref:this.request_name,type:"text",placeholder:"e.g. A special kind of sugar"})),i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"request_description"},"2. Description of product and reason for request *"),i.a.createElement("input",{id:"request_description",ref:this.request_description,type:"text",placeholder:"Why would you like to make this product available?"})),i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"request_badge"},"3. Your name or badge ID"),i.a.createElement("input",{id:"request_badge",ref:this.request_badge,type:"text",placeholder:"This will help organise the requests and move faster"}))),i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"button cancel",onClick:function(){return e.props.togglePopup()}},i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Cancel request"))),i.a.createElement("div",{className:"button submit",onClick:function(){e.doRequest()}},i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Request Product"))))))))}}]),t}(a.Component));R.contextType=b;var q=R,L=(n(53),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.doChangeIsSafeToUpdateUniverse(!0),setTimeout(function(){e.context.doUpdateUniverse(),e.props.togglePopup(!0),e.props.onReturnToDashboard()},4e3)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ActionItemPopupConfirmation"},i.a.createElement("div",{className:"inner"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"header"},i.a.createElement("i",{className:"material-icons"},"check"),i.a.createElement("h2",null,"Thank you for your input")),i.a.createElement("p",null,"Management has been notified about this. The issue will be fixed as soon as possible. Thank you!"),i.a.createElement("div",{className:"button return"},"Returning to dashboard..."),i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"loader"},i.a.createElement("div",{className:"inner"})))))))}}]),t}(a.Component));L.contextType=b;var U=L,M=(n(54),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={input:"",valid:!1},n.backSpace=function(){n.setState({input:n.state.input.slice(0,-1)}),n.updateValid()},n.clear=function(){n.setState({input:""}),n.updateValid()},n.onClick=function(e){n.setState({input:n.state.input+e}),n.updateValid()},n.updateValid=function(){n.setState(function(e,t){return{valid:null!==e.input&&""!==e.input}})},n.setWrapperRef=n.setWrapperRef.bind(Object(p.a)(Object(p.a)(n))),n.handleClickOutside=n.handleClickOutside.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("touchstart",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("touchstart",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.props.togglePopup()}},{key:"createKeys",value:function(){var e=this,t=[];return t.push(this.createKey(7)),t.push(this.createKey(8)),t.push(this.createKey(9)),t.push(this.createKey(4)),t.push(this.createKey(5)),t.push(this.createKey(6)),t.push(this.createKey(1)),t.push(this.createKey(2)),t.push(this.createKey(3)),t.push(this.createKey(0)),t.push(i.a.createElement("div",{key:"backspace",className:"red"},i.a.createElement("i",{onClick:function(){return e.backSpace()},className:"material-icons"},"backspace"))),t.push(i.a.createElement("div",{key:"clear",className:"red"},i.a.createElement("span",{onClick:function(){return e.clear()}},"C"))),t}},{key:"createKey",value:function(e){var t=this;return i.a.createElement("div",{key:e}," ",i.a.createElement("span",{onClick:function(){return t.onClick(e)}},e)," ")}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"FewLeftPopup"},i.a.createElement("div",{className:"inner"},i.a.createElement("div",{className:"card",ref:this.setWrapperRef},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"header"},i.a.createElement("h2",null,"Insert the number of items left"),i.a.createElement("div",{className:"button return",onClick:function(){return e.props.togglePopup()}},"Return")),i.a.createElement("div",{className:"display"},i.a.createElement("p",null,this.state.input)),i.a.createElement("div",{className:"keyboard"},this.createKeys()),i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"button submit","data-active":this.state.valid,onClick:function(){e.props.onConfirm(e.state.input)}},i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Confirm"))),i.a.createElement("div",{className:"button cancel",onClick:function(){return e.props.togglePopup()}},i.a.createElement("div",{className:"content"},i.a.createElement("p",null,"Cancel"))))))))}}]),t}(a.Component)),B=(n(55),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).getItemNameById=function(e){return!v.isEmpty(n.props.itemsFlat)&&n.props.itemsFlat.hasOwnProperty(e)?n.props.itemsFlat[e].name:null},n.printDate=function(e){return O.parseDate(e.createdAt)},n.sortNotifications=function(e){var t=!0;do{t=!0;for(var a=0;a<e.length-1;a++)if(n.printDate(e[a])<n.printDate(e[a+1])){t=!1;var i=e[a];e[a]=e[a+1],e[a+1]=i}}while(!t);return e},n.setWrapperRef=n.setWrapperRef.bind(Object(p.a)(Object(p.a)(n))),n.handleClickOutside=n.handleClickOutside.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("touchstart",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("touchstart",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.props.togglePopup()}},{key:"render",value:function(){var e=this,t=0;return i.a.createElement("div",{className:"AllNotificationsPopup"},i.a.createElement("div",{className:"inner"},i.a.createElement("div",{className:"card",ref:this.setWrapperRef},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"header"},i.a.createElement("h4",null,"Notifications"),i.a.createElement("div",{className:"button return",onClick:function(){e.props.togglePopup()}},"Return")),i.a.createElement("div",{className:"notifications"},this.sortNotifications(this.props.notifications).map(function(n){return i.a.createElement("div",{key:++t,className:"notification-item"},i.a.createElement("div",{className:"header"},i.a.createElement("p",null,e.getItemNameById(n.elementId)),i.a.createElement("p",{className:"time"},e.printDate(n).toString())),i.a.createElement("div",{className:"notification-item-message"},i.a.createElement("h6",null,"from_management"===n.type?"From management: ":null," ",n.content)),i.a.createElement("div",{className:"divider"}))}))))))}}]),t}(a.Component)),F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).toggleRequestPopup=function(){n.setState({showRequestPopup:!n.state.showRequestPopup})},n.toggleFewLeftPopup=function(){n.setState({showFewLeftPopup:!n.state.showFewLeftPopup})},n.toggleActionConfirmationPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({showActionConfirmationPopup:null!==e?"open"===e:!n.state.showActionConfirmationPopup})},n.toggleNotificationsPopup=function(){n.setState({showNotificationsPopup:!n.state.showNotificationsPopup})},n.onClickOption=function(e){n.setState(function(t,a){return{chosen:n.onItemClickMaiSmechera(e,t.elements).chosen}})},n.onClickGoBack=function(e){null!==e?null!==e.parentID?n.setState(function(t,a){return{chosen:n.onItemClickMaiSmechera(e.parentID,t.elements).chosen}}):n.setState(function(t,a){return{chosen:n.onItemClickMaiSmechera(e.ID,t.elements).chosen}}):n.setState(function(t,a){return{chosen:n.onItemClickMaiSmechera(e,t.elements).chosen}})},n.onItemClickMaiSmechera=function(e,t){var a=null;if(null!==t)for(var i=0;i<t.length;i++){if(t[i].chosen=!1,String(t[i].ID)===String(e))return t[i].chosen=t[i].type===v.ELEMENT_TYPE_ITEM,{chosen:t[i],elements:t};if(t[i].type!==v.ELEMENT_TYPE_ITEM&&(a=n.onItemClickMaiSmechera(e,t[i].elements).chosen),null!==a)break}return{chosen:a,elements:t}},n.onItemClick=function(e){var t=n.onItemClickMaiSmechera("Use this recursive function to make every chosen flag false",n.state.elements).elements,a=n.onItemClickMaiSmechera(e,t),i=a.chosen;i&&i.type===v.ELEMENT_TYPE_ITEM&&n.onToggleMobileDrawer("open"),n.setState(function(e,t){return{elements:a.elements,chosen:i}})},n.onClickDiscardSearch=function(){n.setState({chosen:null,navBarClick:!1})},n.discardSearch=function(){n.setState({navBarClick:!1})},n.onNavBarClick=function(){n.setState({drawer_visible:!1,navBarClick:!0})},n.onRequestSubmit=function(){n.toggleRequestPopup(),n.toggleActionConfirmationPopup()},n.onFewLeftSubmit=function(e){""===e?alert("No amount inserted!"):(n.doNotificationSend({itemId:n.state.chosen.ID,quantity:e}),n.toggleFewLeftPopup(),n.toggleActionConfirmationPopup())},n.onToggleMobileDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState(function(t,n){return{drawer_visible:null!==e?"open"===e:!t.drawer_visible}})},n.doUpdateUniverse=function(){console.log(Object(p.a)(Object(p.a)(n)));var e=Object(p.a)(Object(p.a)(n));return console.log("Updating universe..."),e.state.isSafeToUpdateUniverse?new Promise(function(t,n){v.loadElementsFromAPI().then(function(n){if(void 0!==e.state.initial&&null!==e.state.initial&&JSON.stringify(e.state.initial)===JSON.stringify(n))return console.log("Universe was already up to date."),void t();var a=function(){try{var e=n.elements;if(e){for(var t=[],a=0;a<e.length;a++)t.push(new d(e[a]));return t}}catch(i){return console.error(i),[]}}(),i=v.loadItems(a),o=v.loadNotifications(i),r={id:v.isEmpty(n.id)?null:n.id,name:v.isEmpty(n.name)?null:n.name,description:v.isEmpty(n.description)?null:n.description,image:v.isEmpty(n.image)?null:n.image,floor:v.isEmpty(n.floor)?null:n.floor};e.setState({initial:n,itemsFlat:v.flattenElements(i),station:r,drawer_visible:!1,elements:a,items:i,notifications:o,chosen:null,navBarClick:!1,showRequestPopup:!1,showFewLeftPopup:!1,showActionConfirmationPopup:!1,timeoutActionConfirmationPopup:null,showNotificationsPopup:!1,loading:!1}),t()}).catch(function(){e.setState({loading:!1}),n()})}):(console.log("Universe not safe to update."),new Promise(function(e){e()}))},n.doNotificationSend=function(e){var t=Object(p.a)(Object(p.a)(n));return t.setState({loading:!0,isSafeToUpdateUniverse:!1}),new Promise(function(n,a){f.a.post(v.API_NOTIFICATION_SEND,{stationId:t.state.station.id,elementId:e.itemId,quantity:v.isEmpty(e.quantity)?0:e.quantity}).then(function(e){try{console.log(e);var t=e.status;parseInt(t)===v.HTTP_REQUEST_STATUS_OK||parseInt(t)===v.HTTP_REQUEST_STATUS_CREATED?console.log("[OK] SNotification was successful!"):console.log("SNotification encountered errors.")}catch(n){console.error("SNotification failed."),console.error(n),a()}}).catch(function(e){console.error("SNotification failed miserably."),console.error(e),a()}).finally(function(){t.setState({loading:!1})})})},n.state={initial:null,station:{},drawer_visible:!1,elements:[],items:[],itemsFlat:{},notifications:[],chosen:null,navBarClick:!1,showRequestPopup:!1,showFewLeftPopup:!1,showActionConfirmationPopup:!1,timeoutActionConfirmationPopup:null,showNotificationsPopup:!1,loading:!1,isSafeToUpdateUniverse:!0},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.doUpdateUniverse().then(function(){e.setState({loading:!1})}),setInterval(function(){e.doUpdateUniverse()},3e4)}},{key:"render",value:function(){var e=this;return i.a.createElement(b.Provider,{value:v.generateAppContextValues(this)},i.a.createElement("div",{id:"App"},i.a.createElement("div",{className:"App-container"},i.a.createElement("div",{className:"App-left"},i.a.createElement(j,{onClickNavBar:this.onNavBarClick,onClickGoBack:this.onClickGoBack,element:this.state.chosen,elements:this.state.elements,navBarClick:this.state.navBarClick,discardSearch:this.discardSearch,onClickOption:this.onClickOption,onToggleMobileDrawer:this.onToggleMobileDrawer,onToggleNotificationPopup:this.toggleNotificationsPopup}),i.a.createElement(y,{onItemClick:this.onItemClick,elements:this.state.elements,chosen:this.state.chosen})),i.a.createElement("div",{className:"App-right","data-visible":this.state.drawer_visible},i.a.createElement(P,{itemsFlat:this.state.itemsFlat,element:this.state.chosen,items:this.state.items,notifications:this.state.notifications,onClickDiscardSearch:this.onClickDiscardSearch,onClickSearch:this.onNavBarClick,onClickRequest:this.toggleRequestPopup,onActionConfirmation:this.toggleActionConfirmationPopup,onToggleMobileDrawer:this.onToggleMobileDrawer,onClickFew:this.toggleFewLeftPopup,onClickNotifications:this.toggleNotificationsPopup})),this.state.showRequestPopup?i.a.createElement(q,{togglePopup:this.toggleRequestPopup,onSubmit:this.onRequestSubmit}):null,this.state.showActionConfirmationPopup?i.a.createElement(U,{togglePopup:this.toggleActionConfirmationPopup,onReturnToDashboard:function(){e.onItemClick(null),e.toggleActionConfirmationPopup("close")}}):null,this.state.showFewLeftPopup?i.a.createElement(M,{togglePopup:this.toggleFewLeftPopup,onConfirm:this.onFewLeftSubmit}):null,this.state.showNotificationsPopup?i.a.createElement(B,{togglePopup:this.toggleNotificationsPopup,notifications:this.state.notifications,items:this.state.items,itemsFlat:this.state.itemsFlat}):null,i.a.createElement("div",{className:"AppLoader "+(this.state.loading?"active":"")},i.a.createElement("div",null,i.a.createElement("p",null,"Loading..."))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){}},[[20,1,2]]]);
//# sourceMappingURL=main.241b0f56.chunk.js.map